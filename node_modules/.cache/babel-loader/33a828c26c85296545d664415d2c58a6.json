{"ast":null,"code":"import _slicedToArray from\"/home/fs/srmswap/oyster-swap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useMemo,useState}from\"react\";import Wallet from\"@project-serum/sol-wallet-adapter\";import{notify}from\"./notifications\";import{useConnectionConfig}from\"./connection\";import{useLocalStorageState}from\"./utils\";export var WALLET_PROVIDERS=[{name:\"sollet.io\",url:\"https://www.sollet.io\"},{name:\"solflare.com\",url:\"https://solflare.com/access-wallet\"}];var WalletContext=React.createContext(null);export function WalletProvider(_ref){var _WALLET_PROVIDERS$fin,_WALLET_PROVIDERS$fin2;var _ref$children=_ref.children,children=_ref$children===void 0?null:_ref$children;var _useConnectionConfig=useConnectionConfig(),endpoint=_useConnectionConfig.endpoint;var _useLocalStorageState=useLocalStorageState(\"walletProvider\",\"https://www.sollet.io\"),_useLocalStorageState2=_slicedToArray(_useLocalStorageState,2),providerUrl=_useLocalStorageState2[0],setProviderUrl=_useLocalStorageState2[1];var wallet=useMemo(function(){return new Wallet(providerUrl,endpoint);},[providerUrl,endpoint]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),connected=_useState2[0],setConnected=_useState2[1];useEffect(function(){console.log(\"trying to connect\");wallet.on(\"connect\",function(){console.log(\"connected\");setConnected(true);var walletPublicKey=wallet.publicKey.toBase58();var keyToDisplay=walletPublicKey.length>20?\"\".concat(walletPublicKey.substring(0,7),\".....\").concat(walletPublicKey.substring(walletPublicKey.length-7,walletPublicKey.length)):walletPublicKey;notify({message:\"Wallet update\",description:\"Connected to wallet \"+keyToDisplay});});wallet.on(\"disconnect\",function(){setConnected(false);notify({message:\"Wallet update\",description:\"Disconnected from wallet\"});});return function(){wallet.disconnect();setConnected(false);};},[wallet]);return/*#__PURE__*/React.createElement(WalletContext.Provider,{value:{wallet:wallet,connected:connected,providerUrl:providerUrl,setProviderUrl:setProviderUrl,providerName:(_WALLET_PROVIDERS$fin=(_WALLET_PROVIDERS$fin2=WALLET_PROVIDERS.find(function(_ref2){var url=_ref2.url;return url===providerUrl;}))===null||_WALLET_PROVIDERS$fin2===void 0?void 0:_WALLET_PROVIDERS$fin2.name)!==null&&_WALLET_PROVIDERS$fin!==void 0?_WALLET_PROVIDERS$fin:providerUrl}},children);}export function useWallet(){var context=useContext(WalletContext);return{connected:context.connected,wallet:context.wallet,providerUrl:context.providerUrl,setProvider:context.setProviderUrl,providerName:context.providerName};}","map":null,"metadata":{},"sourceType":"module"}